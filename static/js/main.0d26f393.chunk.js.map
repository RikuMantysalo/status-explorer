{"version":3,"sources":["Components/FlexCenter.tsx","Components/MainHeader.tsx","Components/SubHeader.tsx","Views/FrontPage/FrontPage.tsx","config.tsx","Views/PackageDetails/PackageDetails.tsx","App.tsx","index.tsx"],"names":["FlexCenter","styled","div","MainHeader","h1","SubHeader","h2","List","ul","Container","main","ListItem","li","StickyContainer","ErrorContainer","FrontPage","packageNames","error","message","sort","map","pkg","key","to","API_URL","process","SeparatedList","SeparatedListItem","type","ShortDescription","strong","LongDescription","p","DetailsContainer","stripVersionNumber","dependency","replace","PackageDetails","packageName","useParams","useState","setPkg","loading","setLoading","setError","useEffect","a","fetch","json","packageData","fetchData","document","title","isDependedOn","Boolean","dependedOnBy","length","hasDependencies","dependsOn","shortDescription","longDescription","dep","includes","name","App","setPackageNames","data","exact","path","GlobalStyle","createGlobalStyle","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0d26f393.chunk.js","sourcesContent":["import styled from 'styled-components'\n\nexport const FlexCenter = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n`;","import styled from 'styled-components'\n\nexport const MainHeader = styled.h1`\n    font-size: 2em;\n    font-weight: 600;\n    margin: 8px 0px;\n`;","import styled from \"styled-components\";\n\nexport const SubHeader = styled.h2`\n    font-weight: 600;\n    font-size: 1.5rem;\n    margin: 8px 0px;\n    font-family: Arial, Helvetica, sans-serif;\n`;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { FlexCenter } from '../../Components/FlexCenter';\nimport { MainHeader } from '../../Components/MainHeader';\nimport { SubHeader } from '../../Components/SubHeader';\n\ntype FrontPageProps = {\n    packageNames: string[];\n    error?: Error;\n};\n\nconst List = styled.ul`\n    list-style-type: none;\n    text-align: center;\n`;\n\n\nconst Container = styled.main`\nmargin-top: 3rem;\n`\n\nconst ListItem = styled.li`\n    font-size: 1.3rem;\n    line-height: 1.5;\n    font-weight: 200\n    border-bottom: 1px solid #ccc;\n\n    &:last-child {\n        border: none;\n    }\n\n    a {\n        text-decoration: none;\n        display: block;\n        transition: background-color 0.3s ease;\n    }\n\n    &:hover {\n        background-color: #f4f4f4;\n    }\n`;\n\nconst StickyContainer = styled.div`\n    position: fixed;\n    top: 0;\n    background-color: white;\n    width: 100%\n    text-align: center;\n`;\n\nconst ErrorContainer = styled.div`\n    margin-top: 50px;\n`;\n\nexport const FrontPage = ({ packageNames, error }: FrontPageProps) => {\n    return (\n        <FlexCenter>\n            <StickyContainer>\n                <header>\n                <MainHeader>Packages</MainHeader>\n                </header>\n            </StickyContainer>\n            <Container>\n            {error ? (\n                <ErrorContainer>\n                    <SubHeader>Failed to fetch packages!</SubHeader>\n                    {error.message}\n                </ErrorContainer>\n            ) : (\n                <List>\n                    {packageNames.sort().map(pkg => (\n                        <ListItem key={pkg}>\n                            <Link to={`packages/${pkg}`} key={pkg}>\n                                {pkg}\n                            </Link>\n                        </ListItem>\n                    ))}\n                </List>\n            )}\n            </Container>\n        </FlexCenter>\n    );\n};\n","export const API_URL = process.env.REACT_APP_API_URL;\n","import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { MainHeader } from '../../Components/MainHeader';\nimport { EnrichedPackageShape } from 'api/src/services/Enricher';\nimport { API_URL } from '../../config';\nimport styled from 'styled-components';\nimport { FlexCenter } from '../../Components/FlexCenter';\nimport { SubHeader } from '../../Components/SubHeader';\n\ntype PackageDetailsProps = {\n    packageNames: string[];\n};\n\ntype SeparatedListItemProps = {\n    type: 'normal' | 'alternate';\n};\n\nconst SeparatedList = styled.ul`\n    list-style: none;\n\n    li:last-child:after {\n        content: '';\n    }\n`;\n\nconst SeparatedListItem = styled.li`\n    display: inline;\n    &:after {\n        content: \"${({ type }: SeparatedListItemProps) => (type === 'normal' ? ', ' : ' | ')}\";\n    }\n`;\n\nconst ShortDescription = styled.strong`\n    font-weight: 600;\n`;\n\nconst LongDescription = styled.p`\n    white-space: pre-line;\n`;\n\nconst DetailsContainer = styled.main`\n    display: flex;\n    flex-direction: column;\n`;\n\n// CRA does not allow relative imports outside of src so this is copied from\n// api/src/services/Enricher.ts\nconst stripVersionNumber = (dependency: string): string => {\n    return dependency.replace(/ *\\([^)]*\\) */g, '');\n};\n\nexport const PackageDetails = ({ packageNames }: PackageDetailsProps) => {\n    const { packageName } = useParams();\n    const [pkg, setPkg] = useState<EnrichedPackageShape>();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<Error>();\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const packageData: EnrichedPackageShape = await (\n                    await fetch(`${API_URL}/api/packages/${packageName}`)\n                ).json();\n                setPkg(packageData);\n            } catch (error) {\n                setError(error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchData();\n\n        document.title = packageName ? `Package Browser | ${packageName}` : 'Package Browser';\n    }, [packageName]);\n\n    const isDependedOn = Boolean(pkg && pkg.dependedOnBy.length);\n    const hasDependencies = Boolean(pkg && pkg.dependsOn.length);\n\n    if (loading) {\n        return <h1>Loading</h1>;\n    } else if (error) {\n        return (\n            <div>\n                <nav>\n                    <Link to='/'>Back to listing</Link>\n                </nav>\n                <SubHeader>Failed to retrieve package information!</SubHeader>\n                {error.message}\n            </div>\n        );\n    }\n    return (\n        <div>\n            <nav>\n                <Link to='/'>Back to listing</Link>\n            </nav>\n            {pkg && (\n                <>\n                    <FlexCenter>\n                        <header>\n                            <MainHeader>{pkg.packageName}</MainHeader>\n                        </header>\n                    </FlexCenter>\n                    <DetailsContainer>\n                        <header>\n                            <SubHeader>Description</SubHeader>\n                        </header>\n                        <ShortDescription>{pkg.shortDescription}</ShortDescription>\n                        <LongDescription>\n                            {pkg.longDescription\n                                .replace(/  +/g, ' ') // Turn 2 or more spaces in to one\n                                .replace(/\\n (?![-*])/g, '') // Remove linebreaks from non-list items\n                                .replace(/\\s\\.\\s\\n|\\s\\.\\s/g, '\\n\\n') // Replace paragraph separators with line breaks\n                            }\n                        </LongDescription>\n                        {hasDependencies && (\n                            <>\n                                <header>\n                                    <SubHeader>Depends on</SubHeader>\n                                </header>\n                                <SeparatedList>\n                                    {pkg.dependsOn.map(dep =>\n                                        packageNames.includes(stripVersionNumber(dep.name)) ? (\n                                            <SeparatedListItem key={dep.name} type={dep.type}>\n                                                <Link key={dep.name} to={`/packages/${stripVersionNumber(dep.name)}`}>\n                                                    {dep.name}\n                                                </Link>\n                                            </SeparatedListItem>\n                                        ) : (\n                                            <SeparatedListItem key={dep.name} type={dep.type}>\n                                                {dep.name}\n                                            </SeparatedListItem>\n                                        )\n                                    )}\n                                </SeparatedList>\n                            </>\n                        )}\n\n                        {isDependedOn && (\n                            <>\n                                <header>\n                                    <SubHeader>Depended on by</SubHeader>\n                                </header>\n                                <SeparatedList>\n                                    {pkg.dependedOnBy.map((dep: string) => (\n                                        <SeparatedListItem key={dep} type='normal'>\n                                            <Link key={dep} to={`/packages/${dep}`}>\n                                                {dep}\n                                            </Link>\n                                        </SeparatedListItem>\n                                    ))}\n                                </SeparatedList>\n                            </>\n                        )}\n                    </DetailsContainer>\n                </>\n            )}\n        </div>\n    );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { FrontPage } from \"./Views/FrontPage/FrontPage\";\nimport { PackageDetails } from \"./Views/PackageDetails/PackageDetails\";\nimport { API_URL } from \"./config\";\n\nconst App: React.FC = () => {\n  const [packageNames, setPackageNames] = useState<string[]>([]);\n  const [error, setError] = useState();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const packageNames = await (\n          await fetch(`${API_URL}/api/packages`)\n        ).json();\n        setPackageNames(packageNames.data);\n      } catch (error) {\n        setError(error);\n      }\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          <FrontPage error={error} packageNames={packageNames} />\n        </Route>\n        <Route path=\"/packages/:packageName\">\n          <PackageDetails packageNames={packageNames} />\n        </Route>\n        <Route>404</Route>\n      </Switch>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Reset } from \"styled-reset\";\nimport { createGlobalStyle } from \"styled-components\";\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    font-family: Helvetica, Verdana, sans-serif;\n    color: #001F3F;\n    padding: 8px;\n    a:link {\n        color: #0074D9;\n    }\n    a:visited {\n        color: #B10DC9;\n    }\n  }\n`;\n\nif (process.env.NODE_ENV !== \"production\") {\n  import(\"react-axe\").then(axe => {\n    axe.default(React, ReactDOM, 1000);\n    ReactDOM.render(\n      <>\n        <App />\n        <Reset />\n        <GlobalStyle />\n      </>,\n      document.getElementById(\"root\")\n    );\n  });\n} else {\n  ReactDOM.render(\n    <>\n      <App />\n      <Reset />\n      <GlobalStyle />\n    </>,\n    document.getElementById(\"root\")\n  );\n}\n"],"sourceRoot":""}